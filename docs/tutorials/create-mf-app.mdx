---
title: Create module federation app
description: Zephyr Cloud Documentation - Creating a basic module federation app and deploy it through Zephyr.
---

import { Tabs, Tab } from '@theme';

# Create a module federation app

Developed by [Jack Herrington](https://twitter.com/jherr), co-author of the "Practical Module Federation" [book](https://module-federation.myshopify.com/products/practical-module-federation) and technology-focused [YouTuber](https://www.youtube.com/@jherr).

`create-mf-app` is a tool that creates a Module Federation application, API server, or library based on one of multiple different templates.

## Generating Application

This guide provides a comprehensive walkthrough on how to use the `create-mf-app` tool to create a Module Federation application and integrate it with Zephyr.

To execute `npm` package binaries, use the `npx` command as follows:

```bash
npx create-mf-app
```

Choose a name for your application. Ensure you designate one host and at least one remote, choosing names that reflect their roles accordingly.

```bash
? Pick the name of your app: (host)
```

Select the type of application:

```bash
? Project Type: (Use arrow keys)
❯ Application
  API Server
  Library
```

You may use the default port option:

```bash
? Port number: (8080)
```

We conducted tests using React, but other frameworks may also be compatible. See a list of supported framework [here](/reference/supported#supported-frameworks).

```bash
? Framework: (Use arrow keys)
lit-html
preact
❯ react
react-esm
solid-js
svelte
vanilla
(Move up and down to reveal more choices)
```

We prefer TypeScript, but Zephyr is compatible with both TypeScript and JavaScript.

```bash
? Language:
❯ typescript
javascript
```

Both CSS and Tailwind are viable options for styling:

```bash
? CSS: (Use arrow keys)
❯ CSS
Tailwind
```

While both packing options are viable, we strongly recommend **Rspack** for its performance. See [benchmark of Rspack](https://www.rspack.dev/).

```bash
? Bundler: (Use arrow keys)
Webpack
❯ Rspack
```

## Adding Zephyr to Your Module Federation App

Installing Zephyr plugin:

<Tabs values={[{label:"Rspack"}, {label: 'Webpack'}]}>
<Tab>
```bash
cd your-app-name
npm install zephyr-rspack-plugin --save-dev
```
</Tab>
<Tab>
```bash
cd your-app-name
npm install zephyr-webpack-plugin --save-dev
```
</Tab>
</Tabs>

### Zephyr Configuration Integration

Incorporate the Zephyr configuration into your existing setup by wrapping the current configuration object with Zephyr's functionality.

<Tabs values={[{label:"Rspack"}, {label: 'Webpack'}]}>
<Tab>
For Rspack, update your `rspack.config.js`:

```js title="rspack.config.js" {5,12}
const rspack = require('@rspack/core')
const refreshPlugin = require('@rspack/plugin-react-refresh')
const isDev = process.env.NODE_ENV === 'development'
const path = require('path');
const { withZephyr } = require('zephyr-rspack-plugin')

const printCompilationMessage = require('./compilation.config.js');

/**
 * @type {import('@rspack/cli').Configuration}
 */
module.exports = withZephyr()({
  context: __dirname,
  entry: {
    main: './src/index.ts',
  },

  devServer: {
    port: 8080,
    historyApiFallback: true,
    watchFiles: [path.resolve(__dirname, 'src')],
    onListening: function (devServer) {
      const port = devServer.server.address().port
      printCompilationMessage('compiling', port)

      devServer.compiler.hooks.done.tap('OutputMessagePlugin', (stats) => {
        setImmediate(() => {
          if (stats.hasErrors()) {
            printCompilationMessage('failure', port)
          } else {
            printCompilationMessage('success', port)
          }
        })
      })
    }
  },

  resolve: {
    extensions: ['.js', '.jsx', '.ts', '.tsx', '.json']
  },

  module: {
    rules: [
      {
        test: /\.svg$/,
        type: 'asset',
      },
      {
        test: /\.scss$/,
        use: [
          {
            loader: 'postcss-loader',
            options: {
              postcssOptions: {
                plugins: {
                  tailwindcss: {},
                  autoprefixer: {},
                },
              },
            },
          },
        ],
        type: 'css',
      },
      {
        test: /\.(jsx?|tsx?)$/,
        use: [
          {
            loader: 'builtin:swc-loader',
            options: {
              sourceMap: true,
              jsc: {
                parser: {
                  syntax: 'typescript',
                  tsx: true,
                },
                transform: {
                  react: {
                    runtime: 'automatic',
                    development: isDev,
                    refresh: isDev,
                  },
                },
              },
              env: {
                targets: [
                  'chrome >= 87',
                  'edge >= 88',
                  'firefox >= 78',
                  'safari >= 14',
                ],
              },
            },
          },
        ],
      },
    ],
  },

  plugins: [
    new rspack.container.ModuleFederationPlugin({
      name: 'create_mf_app_host',
      filename: 'remoteEntry.js',
      exposes: {},
      shared: {
        react: { eager: true },
        'react-dom': { eager: true },
        'react-router-dom': { eager: true },
      },
    }),
    new rspack.DefinePlugin({
      'process.env.NODE_ENV': JSON.stringify(process.env.NODE_ENV),
    }),
    new rspack.ProgressPlugin({}),
    new rspack.HtmlRspackPlugin({
      template: './src/index.html',
    }),
    isDev ? new refreshPlugin() : null,
  ].filter(Boolean),
})
```
</Tab>
<Tab>
For Webpack, update your `webpack.config.js`:

```js title="webpack.config.js" {2,8}
const path = require('path');
const { withZephyr } = require('zephyr-webpack-plugin')
const HtmlWebpackPlugin = require('html-webpack-plugin');
const ModuleFederationPlugin = require('@module-federation/webpack');

const isDev = process.env.NODE_ENV === 'development';

module.exports = withZephyr()({
  mode: isDev ? 'development' : 'production',
  entry: './src/index.tsx',

  devServer: {
    port: 8080,
    historyApiFallback: true,
  },

  resolve: {
    extensions: ['.js', '.jsx', '.ts', '.tsx', '.json']
  },

  module: {
    rules: [
      {
        test: /\.(ts|tsx)$/,
        use: 'ts-loader',
        exclude: /node_modules/,
      },
      {
        test: /\.css$/,
        use: ['style-loader', 'css-loader'],
      },
    ],
  },

  plugins: [
    new ModuleFederationPlugin({
      name: 'create_mf_app_host',
      filename: 'remoteEntry.js',
      exposes: {},
      shared: {
        react: { singleton: true },
        'react-dom': { singleton: true },
        'react-router-dom': { singleton: true },
      },
    }),
    new HtmlWebpackPlugin({
      template: './src/index.html',
    }),
  ],
})
```
</Tab>
</Tabs>

## Setting up Git Repository

Zephyr requires a Git repository to track your project. Follow these steps to set up your repository:

1. **Initialize the Git Repository:**

```bash
git init
```

2. **Stage Files for Commit:**

```bash
git add .
```

3. **Create an Initial Commit:**

```bash
git commit -m "Initial commit with Zephyr"
```

4. **Set the Default Branch:**

```bash
git branch -M main
```

5. **Create and Link Remote Repository:**

<Tabs values={[{label:"GitHub CLI"}, {label: 'Manual'}]}>
<Tab>
```bash
gh repo create
```
</Tab>
<Tab>
Create a repository on GitHub, then add it as remote:

```bash
git remote add origin https://github.com/username/repository.git
```
</Tab>
</Tabs>

6. **Push to Remote:**

```bash
git push -u origin main
```

## Build and Deploy

Build your application to deploy it with Zephyr:

```bash
npm run build
```

During the build process, Zephyr will:
1. Extract your Module Federation configuration
2. Upload your built assets to Zephyr Cloud
3. Provide you with deployment URLs

Your application will be automatically available at the provided Zephyr URL.

## Next Steps

- Create additional remote applications using `create-mf-app`
- Configure Module Federation relationships between your apps
- Explore [Module Federation patterns](/tutorials/mf-guide)
- Learn about [version management](/features/versions)

For more insights on building micro-frontends with Module Federation, check out Jack Herrington's [video tutorial](https://www.youtube.com/watch?v=32_EikGKESk).