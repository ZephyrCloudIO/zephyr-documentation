import { SourceCode } from '@theme';

# Create MF App
<SourceCode href="https://github.com/ZephyrCloudIO/zephyr-examples/blob/main/examples/create-mf-app-rspack" />


Developed by [Jack Herrington](https://twitter.com/jherr) , co-author of the "Practical Module Federation" [book](https://module-federation.myshopify.com/products/practical-module-federation) and technology-focused [YouTuber](https://www.youtube.com/@jherr), the `create-mf-app` tool offers one of the fastest methods to start using Module Federation.

## Generating Application

```bash filename="Terminal"
npx create-mf-app
```
### Naming

Choose a name for your application. Ensure you designate one host and at least one remote, choosing names that reflect their roles accordingly.

```bash filename="Terminal"
? Pick the name of your app: (host)
```

### Project Type

Select the type of application:

```bash filename="Terminal"
? Project Type: (Use arrow keys)
❯ Application
  API Server
  Library
```
### Port

You may use the default port option:

```bash filename="Terminal"
? Port number: (8080)
```

### Framework

We conducted tests using React, but other frameworks may also be compatible.

```bash filename="Terminal"
? Framework: (Use arrow keys)
lit-html
preact
❯ react
react-esm
solid-js
svelte
vanilla
(Move up and down to reveal more choices)
```
### Language

We prefer TypeScript, but Zephyr is compatible with both TypeScript and JavaScript.

```bash filename="Terminal"
? Language:
❯ typescript
javascript
```
### Styles

Both CSS and Tailwind are viable options for styling:

```bash filename="Terminal"
? CSS: (Use arrow keys)
❯ CSS
Tailwind
```

### Packer

While both packing options are viable, we strongly prefer Rspack due to its superior performance.

```bash filename="Terminal"
? Packer: (Use arrow keys)
Webpack
❯ Rspack
```

### Post Setup

The instructions initially suggest switching to the directory and running `npm install`. However, before proceeding, you should first add Zephyr.

:::info
You may omit the `npm install` and `npm start` steps for now; we will perform the installation later.
:::

```bash filename="Terminal"
Next steps:

▶️ cd create-mf-app-rspack-host
▶️ npm install
▶️ npm start
```

#### Installing Zephyr

Add Zephyr to your application:

```bash filename="Terminal"
npm install zephyr-webpack-plugin --save
```

#### Configuring Zephyr

Wrap the existing configuration with Zephyr:
```diff filename="rspack.config.js"
- module.exports = {/* the existing config object */};
+ const {withZephyr} = require('zephyr-webpack-plugin');
+ module.exports = withZephyr()({/* the existing config object */});
```

#### Setting a Git Origin

#### Setting a Git Origin

1. **Initialize the Git Repository:**

Initialize the Git repository to start tracking your project:

```bash filename="Terminal"
git init
```

2. **Stage Files for Commit:**

Add all files to the staging area in preparation for the initial commit:

```bash filename="Terminal"
git add --all
```

3. **Create an Initial Commit:**

Commit the staged files to your repository with a descriptive message:

```bash filename="Terminal"
git commit -m "Initial commit with Zephyr"
```

4. **Set the Default Branch Name:**

Define 'main' as the default branch for your repository:

```bash filename="Terminal"
git branch -M main
```

5. **Add a Remote Origin:**
Zephyr requires a Git origin to establish a unique project, application, and version combination. Replace `User` and `UserRepo` with your GitHub username and repository name:

```bash filename="Terminal"
git remote add origin https://github.com/User/UserRepo.git
```

6. **Push to GitHub (Optional):**

Optionally, you can push your code to GitHub to store your changes remotely:

```bash filename="Terminal"
git push -u origin main
```

:::info
**Error Handling:**
If you encounter errors due to unset Git configurations, ensure you have set both your Git `user.name` and `user.email`, and that you have a valid 'git remote origin' set up.
```bash filename="Terminal"
[ConfigurationError: [zephyr]: git is not configured properly

    - please set git user.name and user.email

    - please set valid 'git remote origin'

]
```
:::

### Using Zephyr

Zephyr operates as a side effect of the build process, allowing you to execute the build in watch mode for continuous updates.

:::info
Please note that until Alpha 1 is released to production, you will need to operate within our development environment using the following environment variable:
:::

```bash filename="Terminal"
npm run build -- --watch
```

:::info
The first time you initiate a build with Zephyr, it will prompt you to log in by directing you to the Zephyr website. This login is required only on your first build; subsequent builds will not require a login.
:::

#### Understanding Build Outputs

#### Understanding Build Outputs

During the build process, three distinct URIs are generated as follows:
1) An individual snapshot of the build.
2) The current tag.
3) The current environment.

For a detailed explanation of these outputs, please refer to our [versioning documentation](/guide/concepts/versioning).

```bash filename="terminal"
[zephyr]: [zephyr-2.zephyr-2.zackarychapple](zack_zephyr-cloud_io)[10]: deploying to https://zack_zephyr-cloud_io_10-zephyr-2-zephyr-2-zackarychapple-ze.valorkin.dev
[zephyr]: [zephyr-2.zephyr-2.zackarychapple](zack_zephyr-cloud_io)[10]: deploying to https://zephyr-2-zephyr-2-zackarychapple-ze.valorkin.dev
[zephyr]: [zephyr-2.zephyr-2.zackarychapple](zack_zephyr-cloud_io)[10]: deploying to https://t_main_zack_zephyr-cloud_io-zephyr-2-zephyr-2-zackary-5c1b61-ze.valorkin.dev
```

:::info
Please note that the live reload functionality on remotes is currently unavailable and will be addressed shortly.
:::

## Next Steps
You can now proceed to add remotes and start building your federated application as planned.

For insights on building micro-frontends with Rspack and Create MF App, Jack offers an informative [video tutorial](https://www.youtube.com/watch?v=32_EikGKESk).
